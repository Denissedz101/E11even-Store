{% load static %}
<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Formulario Registro</title>
		
		<!-- Bootstrap & Icons -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
		<link rel="stylesheet" href="{% static 'css/estilos-registro.css' %}">
	</head>
	
	<body class="d-flex flex-column min-vh-100">
		
		<!-- Top Bar -->
		<div class="top-bar">
			<div class="contact-info">
				<i class="bi bi-envelope me-2"></i>
				<span>Contacto_E11ven@gmail.com</span>
				<i class="bi bi-geo-alt ms-4 me-2"></i>
				<span>Los Leones 143, Providencia, Regi√≥n Metropolitana | Chile</span>
			</div>
			<div class="social-icons">
				<a href="https://www.facebook.com/e11even_store" target="_blank">
					<img src="https://cdn-icons-png.flaticon.com/512/124/124010.png" width="30">
				</a>
				<a href="https://www.twitter.com/e11even_store" target="_blank">
					<img src="https://cdn-icons-png.flaticon.com/512/124/124021.png" width="30">
				</a>
				<a href="https://www.instagram.com/e11even_store" target="_blank">
					<img src="https://cdn-icons-png.flaticon.com/512/1409/1409946.png" width="30">
				</a>
			</div>
		</div>
		
		<!-- Main Content -->
		<div class="main-content flex-grow-1">
			<div class="header-container">
				<div class="logo">
					<img src="{% static 'img/logo11Store.png' %}" alt="Logo de la tienda">
				</div>
				<div class="nav-menu">
					<ul>
						<li><a href="{% url 'inicio' %}">üè† Inicio</a></li>
						<li><a href="{% url 'menu_categorias' %}">‚â£ Categor√≠as</a></li>
						<li><a href="{% url 'carro_compras' %}">üõí Carrito</a></li>
						<li><a href="{% url 'contacto' %}">‚úâ Contacto</a></li>
						<li><a href="{% url 'inicio_sesion' %}">üîê Iniciar sesi√≥n</a></li>
					<li><a href="{% url 'formulario_registro' %}" class="login-btn">Registrate</a></li>
				</ul>
			</div>
		</div>
		
		<!-- Registro -->
		<div class="container">
			<div id="container-formulario" class="mx-auto mt-4" style="max-width: 700px; background-color: rgba(221, 172, 243, 0.65); padding: 20px; width: 50vw; border-radius: 15px;">
				<h2>Formulario de Registro</h2>
				<form id="registroForm" novalidate>
					<div class="mb-3">
						<label for="usuario" class="form-label">Usuario</label>
						<input type="text" class="form-control" id="usuario" placeholder="Ingrese su usuario" required>
						<small class="text-danger" id="errorUsuario"></small>
					</div>
					
					<div class="mb-3">
						<label for="nombre" class="form-label">Nombre</label>
						<input type="text" class="form-control" id="nombre" placeholder="Ingrese su nombre" required>
						<small class="text-danger" id="errorNombre"></small>
					</div>
					
					<div class="mb-3">
						<label for="apellidos" class="form-label">Apellidos</label>
						<input type="text" class="form-control" id="apellidos" placeholder="Ingrese sus apellidos" required>
						<small class="text-danger" id="errorApellidos"></small>
					</div>
					
					<div class="mb-3">
						<label for="rut" class="form-label">RUT</label>
						<input type="text" class="form-control" id="rut" placeholder="12345678-9" required>
						<small class="text-danger" id="errorRut"></small>
					</div>
					
					<div class="mb-3">
						<label for="email" class="form-label">Correo Electr√≥nico</label>
						<input type="email" class="form-control" id="email" placeholder="correo@email.com" required>
						<small class="text-danger" id="errorEmail"></small>
					</div>
					
					<div class="mb-3">
						<label for="clave" class="form-label">Contrase√±a</label>
						<input type="password" class="form-control" id="clave" placeholder="Ingrese su contrase√±a" required>
						<small class="text-danger" id="errorClave"></small>
					</div>
					
					<div class="mb-3">
						<label for="repetirClave" class="form-label">Repita su Contrase√±a</label>
						<input type="password" class="form-control" id="repetirClave" placeholder="Repita su contrase√±a" required>
						<small class="text-danger" id="errorRepetirClave"></small>
					</div>
					
					<div class="mb-3">
						<label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
						<input type="date" class="form-control" id="fechaNacimiento" required>
						<small class="text-danger" id="errorFechaNacimiento"></small>
					</div>
					
					<div class="mb-3">
						<label for="direccion" class="form-label">Direcci√≥n (Opcional)</label>
						<input type="text" class="form-control" id="direccion" placeholder="Ingrese su direcci√≥n">
					</div>
					
					<!-- Botones -->
					<div class="mb-3">
						<button type="submit" class="btn btn-primary" disabled>Registrarse</button>
						<button type="reset" class="btn btn-secondary">Limpiar</button>
					</div>
					</form>
				</div>
			</div>
		</div>
		
		<!-- Footer -->
		<footer>
			<p class="footer-text">&copy; 2025 Store E11even - Todos los derechos reservados</p>
		</footer>
		
		<!-- ======================================== Script ====================================== -->
		
		<!-- Bootstrap -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
		
		<!-- Validaci√≥n -->
		<script>
			window.addEventListener('DOMContentLoaded', function () {
				const campos = [
				{
					id: "usuario",
					validar: val => val.trim() !== "",
					error: "Este campo no puede estar vac√≠o."
				},
				{
					id: "nombre",
					validar: val => val.trim() !== "",
					error: "Este campo no puede estar vac√≠o."
				},
				{
					id: "apellidos",
					validar: val => val.trim() !== "",
					error: "Este campo no puede estar vac√≠o."
				},
				{
					id: "rut",
					validar: val => /^[0-9]{7,8}-[0-9Kk]$/.test(val),
					error: "El RUT debe ingresarse sin puntos y con gui√≥n (ej. 12345678-9)."
				},
				{
					id: "email",
					validar: val => /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(val),
					error: "Ingrese un correo electr√≥nico v√°lido."
				},
				{
					id: "clave",
					validar: val => /(?=.*\d)(?=.*[A-Z]).{6,18}/.test(val),
					error: "Debe tener al menos una may√∫scula, un n√∫mero y entre 6 y 18 caracteres."
				},
				{
					id: "repetirClave",
					validar: val => val === document.getElementById("clave").value,
					error: "Las contrase√±as no coinciden."
				},
				{
					id: "fechaNacimiento",
					validar: val => val !== "",
					error: "Debe ingresar su fecha de nacimiento."
				}
				];
				
				const btnRegistrar = document.querySelector('button[type="submit"]');
				
				function verificarCamposCompletos() {
					const todosCompletos = campos.every(campo => {
						const valor = document.getElementById(campo.id).value.trim();
						return valor !== "";
					});
					btnRegistrar.disabled = !todosCompletos;
				}
				
				campos.forEach(campo => {
					const input = document.getElementById(campo.id);
					input.addEventListener("input", () => {
						verificarCamposCompletos();
						
						const valor = input.value.trim();
						if (campo.validar(valor)) {
							input.classList.remove("is-invalid");
							input.classList.add("is-valid");
							} else {
							input.classList.remove("is-valid");
							input.classList.add("is-invalid");
						}
					});
				});
				
				document.getElementById("registroForm").addEventListener("submit", function (e) {
					e.preventDefault();
					let formularioValido = true;
					
					campos.forEach(campo => {
						const input = document.getElementById(campo.id);
						const errorEl = document.getElementById("error" + campo.id.charAt(0).toUpperCase() + campo.id.slice(1));
						const valor = input.value.trim();
						
						if (!campo.validar(valor)) {
							errorEl.innerText = campo.error;
							input.classList.remove("is-valid");
							input.classList.add("is-invalid");
							formularioValido = false;
							} else {
							errorEl.innerText = "";
							input.classList.remove("is-invalid");
							input.classList.add("is-valid");
						}
					});
					
					if (formularioValido) {
						alert("¬°Registro exitoso!");
						// Aqu√≠ podr√≠as enviar el formulario con fetch/AJAX si lo necesitas
					}
				});
				
				// Activar o desactivar el bot√≥n de registro desde el principio
				verificarCamposCompletos();
			});
		</script>
		
		
		
	</body>
</html>